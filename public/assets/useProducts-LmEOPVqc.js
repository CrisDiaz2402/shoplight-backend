import{r as u,j as m,f as o}from"./index-C5EFz0i3.js";function C(){const r=u([]),c=u(!1),s=u(null),n=u(""),i=m(()=>{if(!n.value)return r.value;const t=n.value.toLowerCase();return r.value.filter(e=>(e.name||"").toString().toLowerCase().includes(t)||(e.description||"").toString().toLowerCase().includes(t))});async function p(){c.value=!0,s.value=null;try{const t=await o.get("/products");return r.value=Array.isArray(t.data)?t.data:[],r.value}catch(t){throw s.value=t?.response?.data?.message||t?.message||"Error cargando productos",t}finally{c.value=!1}}async function f(t){try{return(await o.get(`/products/${t}`)).data}catch(e){throw e}}async function v(t){try{const a=(await o.post("/products",t)).data;return r.value.unshift(a),a}catch(e){throw e}}async function y(t,e){try{const d=(await o.put(`/products/${t}`,e)).data,l=r.value.findIndex(P=>P.id===t);return l!==-1&&(r.value[l]=d),d}catch(a){throw a}}async function h(t){try{return await o.delete(`/products/${t}`),r.value=r.value.filter(e=>e.id!==t),!0}catch(e){throw e}}function w(t){n.value=t}function g(){s.value=null}return{products:r,filteredProducts:i,loading:c,error:s,searchQuery:n,fetchProducts:p,getProduct:f,createProduct:v,updateProduct:y,deleteProduct:h,setSearchQuery:w,clearError:g}}export{C as u};

import{r as c,j as m,f as o}from"./index-C5EFz0i3.js";function L(){const t=c([]),u=c(!1),s=c(null),n=c(""),g=m(()=>{if(!n.value)return t.value;const e=n.value.toLowerCase();return t.value.filter(r=>r.name.toLowerCase().includes(e)||r.description&&r.description.toLowerCase().includes(e))});async function d(){u.value=!0,s.value=null;try{const e=await o.get("/categories");return t.value=Array.isArray(e.data)?e.data:[],t.value}catch(e){throw s.value=e?.response?.data?.message||e?.message||"Error cargando categorÃ­as",e}finally{u.value=!1}}async function f(e){try{return(await o.get(`/categories/${e}`)).data}catch(r){throw r}}async function y(e){try{const a=(await o.post("/categories",e)).data;return t.value.unshift(a),a}catch(r){throw r}}async function p(e,r){try{const i=(await o.put(`/categories/${e}`,r)).data,l=t.value.findIndex(C=>C.id===e);return l!==-1&&(t.value[l]=i),i}catch(a){throw a}}async function v(e){try{return await o.delete(`/categories/${e}`),t.value=t.value.filter(r=>r.id!==e),!0}catch(r){throw r}}function h(e){n.value=e}function w(){s.value=null}return{categories:t,filteredCategories:g,loading:u,error:s,searchQuery:n,fetchCategories:d,getCategory:f,createCategory:y,updateCategory:p,deleteCategory:v,setSearchQuery:h,clearError:w}}export{L as u};

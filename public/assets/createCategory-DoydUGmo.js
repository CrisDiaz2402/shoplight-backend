import{d as V,r as d,j as N,c as n,a as e,b as m,x as p,u as v,I as f,y as D,g,z as h,A as y,n as _,t as c,v as j,h as i,_ as B}from"./index-C5EFz0i3.js";import{u as z}from"./useCategories-C0eZ0PpZ.js";const I={class:"w-full"},S={class:"mb-6"},T={class:"mb-3"},q={class:"flex items-start justify-between"},F={class:"flex items-center"},G=["disabled"],M={key:0,class:"flex items-center"},O={key:1,class:"flex items-center"},R={class:"w-full"},U={class:"bg-white py-8 px-6 shadow sm:rounded-lg"},A={class:"mt-1"},H={key:0,class:"mt-2 text-sm text-red-600"},L={class:"mt-1"},Y={key:0,class:"mt-2 text-sm text-red-600"},$={class:"mt-2 text-sm text-gray-500"},J={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4"},K={class:"flex"},P={class:"ml-3"},Q={class:"mt-2 text-sm text-red-700"},W=V({__name:"createCategory",setup(X){const x=j(),{createCategory:w}=z(),s=d({name:"",description:""}),l=d(!1),r=d(""),a=d({}),k=N(()=>s.value.name.trim().length>=2&&!l.value);function C(){return a.value={},s.value.name.trim()?s.value.name.trim().length<2?a.value.name="El nombre debe tener al menos 2 caracteres":s.value.name.trim().length>100&&(a.value.name="El nombre no puede exceder 100 caracteres"):a.value.name="El nombre es obligatorio",s.value.description&&s.value.description.length>500&&(a.value.description="La descripción no puede exceder 500 caracteres"),Object.keys(a.value).length===0}async function b(){if(C()){l.value=!0,r.value="";try{const o={name:s.value.name.trim(),description:s.value.description?.trim()||void 0};await w(o),x.push({path:"/adminproductos/categorias",query:{success:"created",name:o.name}})}catch(o){console.error("Error al crear categoría:",o),o?.response?.status===409||o?.response?.data?.message?.includes("único")?r.value=`Ya existe una categoría con el nombre "${s.value.name}"`:o?.response?.status===401?r.value="No tienes permisos para crear categorías":r.value=o?.response?.data?.message||"Error inesperado al crear la categoría"}finally{l.value=!1}}}function E(){x.push("/adminproductos/categorias")}return(o,t)=>(i(),n("div",I,[e("div",S,[e("div",T,[e("button",{onClick:E,type:"button",class:"inline-flex items-center text-sm text-indigo-600 hover:text-indigo-800"},[m(v(f),{icon:"mdi:arrow-left",class:"w-5 h-5 mr-2"}),t[2]||(t[2]=p(" Volver ",-1))])]),e("div",q,[t[5]||(t[5]=e("div",{class:"text-left"},[e("h2",{class:"text-3xl font-extrabold text-gray-900"},"Crear Nueva Categoría"),e("p",{class:"mt-1 text-sm text-gray-600"},"Organiza tus productos creando una nueva categoría")],-1)),e("div",F,[e("button",{onClick:b,type:"button",disabled:l.value||!k.value,class:"ml-4 inline-flex items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(i(),n("div",M,[...t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},null,-1),p(" Guardando... ",-1)])])):(i(),n("span",O,[m(v(f),{icon:"mdi:content-save",class:"w-4 h-4 mr-2"}),t[4]||(t[4]=p(" Guardar ",-1))]))],8,G)])])]),e("div",R,[e("div",U,[e("form",{onSubmit:D(b,["prevent"]),class:"space-y-6 w-full"},[e("div",null,[t[6]||(t[6]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nombre de la categoría * ",-1)),e("div",A,[h(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=u=>s.value.name=u),type:"text",required:"",maxlength:"100",class:_(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.name}]),placeholder:"Ej: Hogar, Tecnología, Ropa..."},null,2),[[y,s.value.name]]),a.value.name?(i(),n("p",H,c(a.value.name),1)):g("",!0)])]),e("div",null,[t[7]||(t[7]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Descripción (opcional) ",-1)),e("div",L,[h(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=u=>s.value.description=u),rows:"3",maxlength:"500",class:_(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.description}]),placeholder:"Describe brevemente esta categoría..."},null,2),[[y,s.value.description]]),a.value.description?(i(),n("p",Y,c(a.value.description),1)):g("",!0),e("p",$,c(s.value.description?.length||0)+"/500 caracteres",1)])]),r.value?(i(),n("div",J,[e("div",K,[m(v(f),{icon:"mdi:alert-circle",class:"h-5 w-5 text-red-400"}),e("div",P,[t[8]||(t[8]=e("h3",{class:"text-sm font-medium text-red-800"},"Error al crear categoría",-1)),e("div",Q,c(r.value),1)])])])):g("",!0)],32)])])]))}}),te=B(W,[["__scopeId","data-v-917ff267"]]);export{te as default};
